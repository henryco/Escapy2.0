# **Escapy Active Component**

Это рефлексивная библотека для сериализации и конфигурации компонентов с возможностью использования в скриптинге через внешние файлы.
На данный момент существует имплементация ореентированная на работу с **`XML`** файлами, однако ничего не мешает написать свою заточенную 
под **`JSON`**.

В основе концепции лежит разделение объектов на два вида: 

* **`Plain Java Objet`**
* **`Escapy Component`**

Первые как следует из названия это обыкновенные объекты java инстанцируемые как собственно обычные объекты через конструктор.
Вторые это компоненты библотеки которые конфигурируются через фабрики компонентов в коде с помощью callback' и аннотаций **`@EscapyComponent`**,
такие компоненты не обязательно должны быть объектами java, а могут быть и вовсе обыкновенными методами. В свою очередь 
фабрики компонентов **`@EscapyComponentFactory`** могут иметь внутреннее состояние изменяемое через те самые методы, что собственно и позволяет использовать
библиотеку для скриптинга (от сюда и название), а в связке с **`Dependency injection`** превращает библиотеку в убийственный комбайнер.

 ****

# **Escapy Component Factory**
Декларация и конфигурация инстанцируемых через внешний файл компонентов производится через фабрики компонентов которые могут иметь внутреннее состояние.
Для этого следуеть отметить класс аннотацией **`@EscapyComponentFactory(%name%)`** которая в качестве аргумента принимает
название фабрики. Так же фабрики могут содержать другие фложенные фабрики, однако в таком случае они должны иметь пустой публичный конструктор.

### **EscapyComponent**
За инстанцирование компонентов внутри фабрик отвечают методы отмеченные аннотацией **`@EscapyComponent(%name%)`** их входные параметры 
могут быть отмечены аннотацией **`@Arg(%name%)`** что бы можно было связать параметр из внешнего файла с параметром метода, в противном случае 
связывание будет происходить по порядковому номеру, так же параметрами могут быть варарги (varrags), их тоже можно именовать, но в таком случае
во внешнем файле придется передавать варарг явным способом через массив.

### **EscapyComponentFactoryListener**
Инстанцирование компонентов в фабрике можно перехватывать и контролировать через callback'и интерфейса **`EscapyComponentFactoryListener`**, 
для этого достаточно что бы фабрика просто реализовала 2 метода из этого интерфейса: 

* **`boolean enterComponent(String name);`**

* **`Object leaveComponent(String name, Object instance);`**

Первый метод вызывается перед созданием компонента - с его именем в качестве входного параметра, а от возвращаемого значения
зависит будет ли данный компонент создаваться вообще. 
Второй метод в качестве первого входного параметра принимает имя компонента, в свою очередь второй параметр это уже созданный компонент 
который по умолчанию возвращает метод.


